(()=>{var e={};e.id=286,e.ids=[286],e.modules={1958:(e,s,r)=>{"use strict";r.d(s,{BK:()=>o,eu:()=>n,q5:()=>d});var a=r(13486),t=r(60159),l=r(46267),i=r(26518);let n=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l.bL,{ref:r,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));n.displayName=l.bL.displayName;let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l._V,{ref:r,className:(0,i.cn)("aspect-square h-full w-full",e),...s}));o.displayName=l._V.displayName;let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l.H4,{ref:r,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));d.displayName=l.H4.displayName},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9497:(e,s,r)=>{"use strict";r.d(s,{ReviewForm:()=>a});let a=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call ReviewForm() from the server but ReviewForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\components\\review-form.tsx","ReviewForm")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14176:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>C,dynamicParams:()=>b});var a=r(38828),t=r(61365),l=r(42543),i=r(14299),n=r(66921),o=r(30270),d=r(46764);let c=(0,d.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var m=r(56203),x=r(76435),u=r(44495),p=r(25282);let f=(0,d.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var h=r(9497),v=r(29579),j=r(90698);let b=!0;async function g(e){try{let s=await fetch(`http://localhost:3001/api/yellow-books/${e}`,{next:{revalidate:3600}});if(!s.ok)return null;return await s.json()}catch(e){return console.error("Error fetching business:",e),null}}async function N(e){try{let s=await fetch(`http://localhost:3001/api/yellow-books/${e}/reviews`,{next:{revalidate:300}});if(!s.ok)return[];return await s.json()}catch(e){return console.error("Error fetching reviews:",e),[]}}async function w({business:e}){let s=e.images||[e.logo].filter(Boolean);return 0===s.length?(0,a.jsx)("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-muted-foreground",children:"No images available"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-square relative",children:(0,a.jsx)(i.default,{src:s[0],alt:e.name,fill:!0,className:"object-cover rounded-lg",priority:!0})}),s.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:s.slice(1,5).map((s,r)=>(0,a.jsx)("div",{className:"aspect-square relative",children:(0,a.jsx)(i.default,{src:s,alt:`${e.name} ${r+1}`,fill:!0,className:"object-cover rounded-lg"})},r))})]})}async function y({businessId:e,businessName:s}){let r=await N(e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(c,{className:"h-5 w-5"}),"Reviews (",r.length,")"]})}),(0,a.jsx)(h.ReviewForm,{businessId:e,businessName:s}),(0,a.jsx)(v.ReviewList,{businessId:e})]})}function k(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(j.E,{className:"h-6 w-48"}),(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)(j.E,{className:"h-4 w-24 mb-2"}),(0,a.jsx)(j.E,{className:"h-16 w-full"})]})},s))})]})}async function C({params:e}){let s=await e,r=await g(s.id);return r||(0,l.notFound)(),(0,a.jsxs)("div",{className:"container py-12",children:[(0,a.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(j.E,{className:"aspect-square w-full"}),children:(0,a.jsx)(w,{business:r})})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:r.name}),r.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-primary/10 px-3 py-1 rounded-full",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),(0,a.jsx)("span",{className:"font-semibold",children:r.rating}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:["(",r.reviewCount||0," reviews)"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:r.categories.map((e,s)=>(0,a.jsx)(o.E,{variant:"secondary",children:e},s))}),(0,a.jsx)("p",{className:"text-muted-foreground",children:r.description})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Contact Information"})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Address"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:r.address.full})]})]}),r.contact.phone.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Phone"}),(0,a.jsx)("div",{className:"space-y-1",children:r.contact.phone.map((e,s)=>(0,a.jsx)("p",{className:"text-muted-foreground",children:e},s))})]})]}),r.contact.website&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Website"}),(0,a.jsx)("a",{href:r.contact.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Visit Website"})]})]}),r.hours&&Object.keys(r.hours).length>0&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Hours"}),(0,a.jsx)("div",{className:"space-y-1 text-muted-foreground",children:Object.entries(r.hours).map(([e,s])=>(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsxs)("span",{className:"capitalize",children:[e,":"]}),(0,a.jsx)("span",{children:s})]},e))})]})]})]})]})]})]}),(0,a.jsx)("div",{className:"mt-12",children:(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(k,{}),children:(0,a.jsx)(y,{businessId:s.id,businessName:r.name})})})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29563:(e,s,r)=>{"use strict";r.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var a=r(13486),t=r(60159),l=r(26518);let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},29579:(e,s,r)=>{"use strict";r.d(s,{ReviewList:()=>a});let a=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call ReviewList() from the server but ReviewList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\components\\review-list.tsx","ReviewList")},30270:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var a=r(38828);r(61365);var t=r(94455),l=r(43128);let i=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...r}){return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:s}),e),...r})}},30991:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=r(24332),t=r(48819),l=r(67851),i=r.n(l),n=r(97540),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d={children:["",{children:["yellow-books",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,14176)),"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\app\\yellow-books\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,64356)),"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,70331)),"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,87239)),"C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Dell\\Documents\\Yellowbook\\Yellow-book\\apps\\web\\src\\app\\yellow-books\\[id]\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/yellow-books/[id]/page",pathname:"/yellow-books/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33873:e=>{"use strict";e.exports=require("path")},58310:(e,s,r)=>{"use strict";r.d(s,{ReviewList:()=>d});var a=r(13486),t=r(60159),l=r(29563);let i=(0,r(89649).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var n=r(83821),o=r(1958);function d({businessId:e,refreshTrigger:s}){let[r,d]=(0,t.useState)([]),[c,m]=(0,t.useState)(!0),[x,u]=(0,t.useState)(null);return c?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)(l.Zp,{className:"animate-pulse",children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})},e))}):x?(0,a.jsx)(l.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsx)("p",{className:"text-red-800",children:x})})}):0===r.length?(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6 text-center text-muted-foreground",children:(0,a.jsx)("p",{children:"Одоогоор сэтгэгдэл байхгүй байна. Анхны сэтгэгдлээ үлдээгээрэй!"})})}):(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(o.eu,{className:"w-12 h-12",children:[(0,a.jsx)(o.BK,{src:e.avatar,alt:e.author}),(0,a.jsx)(o.q5,{children:(0,a.jsx)(i,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.author}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.date})]}),(0,a.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(s=>(0,a.jsx)(n.A,{className:`w-4 h-4 ${s<=e.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))}),(0,a.jsx)("p",{className:"text-muted-foreground",children:e.comment})]})]})})},e.id))})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63627:(e,s,r)=>{"use strict";r.d(s,{T:()=>i});var a=r(13486),t=r(60159),l=r(26518);let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));i.displayName="Textarea"},66217:(e,s,r)=>{Promise.resolve().then(r.bind(r,72999)),Promise.resolve().then(r.bind(r,58310)),Promise.resolve().then(r.t.bind(r,75636,23))},66921:(e,s,r)=>{"use strict";r.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var a=r(38828),t=r(61365),l=r(43128);let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},72999:(e,s,r)=>{"use strict";r.d(s,{ReviewForm:()=>m});var a=r(13486),t=r(60159),l=r(74941),i=r(63627),n=r(23025),o=r(41571),d=r(83821),c=r(29563);function m({businessId:e,businessName:s,onReviewSubmitted:r}){let[m,x]=(0,t.useState)(0),[u,p]=(0,t.useState)(0),[f,h]=(0,t.useState)(""),[v,j]=(0,t.useState)(""),[b,g]=(0,t.useState)(!1),[N,w]=(0,t.useState)(null),y=async s=>{if(s.preventDefault(),!f||!v||0===m)return void w({type:"error",text:"Бүх талбарыг бөглөнө үү!"});g(!0),w(null);try{let s=await fetch("http://localhost:3001/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:e,author:f,rating:m,comment:v})}),a=await s.json();if(!s.ok)throw Error(a.error||"Алдаа гарлаа");w({type:"success",text:a.message||"Сэтгэгдэл амжилттай нэмэгдлээ!"}),x(0),h(""),j(""),r&&setTimeout(()=>{r()},1e3)}catch(e){w({type:"error",text:e instanceof Error?e.message:"Алдаа гарлаа"})}finally{g(!1)}};return(0,a.jsxs)(c.Zp,{className:"w-full",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Сэтгэгдэл үлдээх"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s,"-ийн талаарх өөрийн туршлагаасаа хуваалцана уу"]})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"rating",children:"Таны үнэлгээ *"}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>x(e),onMouseEnter:()=>p(e),onMouseLeave:()=>p(0),className:"transition-transform hover:scale-110",children:(0,a.jsx)(d.A,{className:`w-8 h-8 ${e<=(u||m)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"author",children:"Таны нэр *"}),(0,a.jsx)(n.p,{id:"author",placeholder:"Жишээ: Бат",value:f,onChange:e=>h(e.target.value),required:!0,disabled:b})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"comment",children:"Сэтгэгдэл *"}),(0,a.jsx)(i.T,{id:"comment",placeholder:"Энэ бизнесийн талаарх өөрийн туршлагаасаа хуваалцана уу...",value:v,onChange:e=>j(e.target.value),required:!0,disabled:b,rows:4,maxLength:500}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[v.length,"/500"]})]}),N&&(0,a.jsx)("div",{className:`p-3 rounded-md text-sm ${"success"===N.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:N.text}),(0,a.jsx)(l.$,{type:"submit",className:"w-full",disabled:b||0===m,children:b?"Илгээж байна...":"Сэтгэгдэл илгээх"})]})})]})}},75945:(e,s,r)=>{Promise.resolve().then(r.bind(r,9497)),Promise.resolve().then(r.bind(r,29579)),Promise.resolve().then(r.t.bind(r,56082,23))},79551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[50,877,255,493,914,786],()=>r(30991));module.exports=a})();