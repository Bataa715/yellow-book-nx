(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{5725:(e,r,t)=>{"use strict";t.d(r,{C5:()=>v,MJ:()=>p,Rr:()=>f,eI:()=>u,lR:()=>j,lV:()=>o,zB:()=>m});var s=t(4568),a=t(7620),n=t(9649),i=t(1938),l=t(3928),c=t(2555);let o=i.Op,d=a.createContext({}),m=e=>{let{...r}=e;return(0,s.jsx)(d.Provider,{value:{name:r.name},children:(0,s.jsx)(i.xI,{...r})})},x=()=>{let e=a.useContext(d),r=a.useContext(h),{getFieldState:t,formState:s}=(0,i.xW)(),n=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},h=a.createContext({}),u=a.forwardRef((e,r)=>{let{className:t,...n}=e,i=a.useId();return(0,s.jsx)(h.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:r,className:(0,l.cn)("space-y-2",t),...n})})});u.displayName="FormItem";let j=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:n,formItemId:i}=x();return(0,s.jsx)(c.J,{ref:r,className:(0,l.cn)(n&&"text-destructive",t),htmlFor:i,...a})});j.displayName="FormLabel";let p=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:i,formDescriptionId:l,formMessageId:c}=x();return(0,s.jsx)(n.DX,{ref:r,id:i,"aria-describedby":a?"".concat(l," ").concat(c):"".concat(l),"aria-invalid":!!a,...t})});p.displayName="FormControl";let f=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:n}=x();return(0,s.jsx)("p",{ref:r,id:n,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});f.displayName="FormDescription";let v=a.forwardRef((e,r)=>{var t;let{className:a,children:n,...i}=e,{error:c,formMessageId:o}=x(),d=c?String(null!=(t=null==c?void 0:c.message)?t:""):n;return d?(0,s.jsx)("p",{ref:r,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",a),...i,children:d}):null});v.displayName="FormMessage"},6530:(e,r,t)=>{Promise.resolve().then(t.bind(t,7723))},7723:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(4568),a=t(7620),n=t(2942),i=t(1938),l=t(60),c=t(8072),o=t(7227),d=t(5725),m=t(5165),x=t(3353),h=t(3547),u=t(43),j=t(6578),p=t(7261),f=t.n(p),v=t(7599),y=t(4675);let N=c.Ik({name:c.Yj().min(2,"Нэр дор хаяж 2 үсэгтэй байх ёстой."),icon:c.Yj().min(1,"Айкон сонгоно уу.")});function g(){let e=(0,n.useParams)(),r=(0,n.useRouter)(),t=e.id,{toast:c}=(0,h.dj)(),[p,g]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!0),C=(0,i.mN)({resolver:(0,l.u)(N),defaultValues:{name:"",icon:""}});(0,a.useEffect)(()=>{t&&F()},[t]);let F=async()=>{b(!0);try{let e=await fetch("http://localhost:3001/api/categories/".concat(t));if(!e.ok)throw Error("Category not found");let r=(await e.json()).data;C.reset({name:r.name,icon:r.icon})}catch(e){console.error("Failed to fetch category",e),c({variant:"destructive",title:"Алдаа",description:"Категорийн мэдээллийг татахад алдаа гарлаа."}),r.push("/admin/categories")}finally{b(!1)}},R=async e=>{g(!0);try{let s=await fetch("http://localhost:3001/api/categories/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to update category")}c({title:"Амжилттай",description:"Категори амжилттай шинэчлэгдлээ."}),r.push("/admin/categories")}catch(e){console.error("Error updating category:",e),c({variant:"destructive",title:"Алдаа",description:e instanceof Error?e.message:"Категори шинэчлэхэд алдаа гарлаа."})}finally{g(!1)}},{name:I,icon:E}=C.watch(),_=(e=>{let r=v.T_.find(r=>r.name.toLowerCase()===e.toLowerCase());return null==r?void 0:r.component})(E);return w?(0,s.jsx)("div",{className:"container mx-auto max-w-2xl py-12 px-4 md:px-6",children:(0,s.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"})})}):(0,s.jsxs)("div",{className:"container mx-auto max-w-2xl py-12 px-4 md:px-6",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(o.$,{asChild:!0,variant:"outline",children:(0,s.jsxs)(f(),{href:"/admin/categories",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Буцах"]})})}),(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:"Категори засах"}),(0,s.jsx)(x.BT,{children:"Категорийн мэдээллийг шинэчлэнэ үү."})]}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)(d.lV,{...C,children:(0,s.jsxs)("form",{onSubmit:C.handleSubmit(R),className:"space-y-6",children:[(0,s.jsx)(d.zB,{control:C.control,name:"name",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{htmlFor:"name",children:"Категорийн нэр"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(m.p,{id:"name",placeholder:"Категорийн нэрийг оруулна уу",...r})}),(0,s.jsx)(d.Rr,{children:"Категорийн нэрийг оруулна уу."}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:C.control,name:"icon",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Айкон"}),(0,s.jsxs)(y.l6,{onValueChange:r.onChange,value:r.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(y.bq,{children:(0,s.jsx)(y.yv,{placeholder:"Айкон сонгоно уу"})})}),(0,s.jsx)(y.gC,{children:v.T_.map(e=>{let r=e.component;return(0,s.jsx)(y.eb,{value:e.name.toLowerCase(),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]})},e.name)})})]}),(0,s.jsx)(d.Rr,{children:"Категорид тохирох айкон сонгоно уу."}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/50",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Урьдчилан харах"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[_&&(0,s.jsx)("div",{className:"p-2 rounded-full bg-accent",children:(0,s.jsx)(_,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)("span",{className:"font-medium",children:I||"Категорийн нэр"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(o.$,{type:"submit",disabled:p,children:p?"Шинэчилж байна...":"Шинэчлэх"}),(0,s.jsx)(o.$,{type:"button",variant:"outline",asChild:!0,children:(0,s.jsx)(f(),{href:"/admin/categories",children:"Цуцлах"})})]})]})})})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[738,261,938,423,983,371,985,898,19,587,315,358],()=>r(6530)),_N_E=e.O()}]);